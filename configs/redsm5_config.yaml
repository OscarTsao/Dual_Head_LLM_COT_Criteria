# ReDSM5 Dataset Configuration for DHRD
# Binary classification for DSM-5 depression criteria detection
# Based on paper: arXiv:2509.21487 (DHRD) and arXiv:2508.03399 (ReDSM5)

# Model configuration
model:
  name_or_path: "gpt2"  # Can be changed to "gpt2-medium", "gpt2-large", or other decoder models
  num_labels: 2  # Binary classification: 0 (no criteria) or 1 (criteria present)
  dropout_prob: 0.1
  loss_weight_alpha: 0.5  # Weight for classification loss (1-alpha for LM loss)

# Data configuration
data:
  train_file: "data/redsm5_processed/train.json"
  eval_file: "data/redsm5_processed/eval.json"
  test_file: "data/redsm5_processed/test.json"
  max_input_length: 512  # ReDSM5 posts avg ~295 words
  max_rationale_length: 1024  # Clinical explanations can be lengthy
  batch_size: 4  # Reduced for longer sequences
  num_workers: 2

# Training configuration
training:
  num_epochs: 5
  learning_rate: 3.0e-5  # Lower LR for clinical text
  weight_decay: 0.01
  warmup_steps: 100
  max_grad_norm: 1.0
  log_interval: 20
  eval_interval: 100
  save_dir: "./outputs/redsm5_dhrd_experiment"

  # Optimizer settings
  optimizer:
    type: "adamw"
    betas: [0.9, 0.999]
    eps: 1.0e-8

  # Scheduler settings
  scheduler:
    type: "linear"  # Options: linear, cosine, constant
    warmup_ratio: 0.1

# Evaluation configuration
evaluation:
  batch_size: 8
  compute_throughput: true
  benchmark_runs: 3

# Hardware configuration
hardware:
  device: "cuda"  # Options: cuda, cpu
  mixed_precision: false
  gradient_accumulation_steps: 2  # Effective batch size = 4 * 2 = 8

# SuperGLUE task configuration (not used for ReDSM5)
superglue:
  task_name: "boolq"
  use_superglue: false

# Logging and experiment tracking
logging:
  use_mlflow: true
  experiment_name: "redsm5_dhrd_experiments"
  tracking_uri: "file:./mlruns"
  log_model: true

# Reproducibility
seed: 42

# Dataset-specific notes:
# - ReDSM5 has 1484 posts with DSM-5 depression criteria annotations
# - Binary classification: detect if post contains any depression criteria
# - 75.9% positive class (status=1), 24.1% negative class (status=0)
# - Clinical rationales from licensed psychologist included for training
# - Average post length: 295 words
# - Average rationale length: 77 words
